<div class='container'>
  <div x-ng-controller="GamesController">
    <h1>Create New Bond</h1>
    <h4>Know two alike games?</h4>
    <div class='row' id='source-target-search'>
      <!-- Source -->
      <div class="col-md-6">
        <h3><span class='label label-primary'>This game...</span></h3>
        <div class='input-group'>
          <input type='text' class='form-control' ng-model='sourceSearch'>
          <span class='input-group-btn'><button class='btn btn-default' ng-click='searchList(sourceSearch, "source")'>Search</button></span>
        </div>

        <!-- Show source search results -->
        <div ng-hide="sourceSelected" id='source-search'>
          <h4>Results:</h4>
          <div id='sourceResults'>
            <div ng-repeat="source in sourceList | startFrom: sourcePage * pageSize | limitTo: 5">
              <img src="{{source.image.icon_url}}" height='80' width='80'><a href ng-click='selectSource(source)'>{{source.name}} - {{source.id}}</a>
            </div>
          </div>
          <div class='btn-group btn-group-sm' id='source-search-buttons' ng-show='sourcePageCount'>
            <button type='button' class='btn btn-default' ng-disabled='sourcePage == 0' ng-click='sourcePage = sourcePage - 1'>Previous</button>
            <button type='button' class='btn btn-default'>{{sourcePage + 1}}/{{sourcePageCount + 1}}</button>
            <button type='button' class='btn btn-default' ng-disabled='sourcePage == sourcePageCount' ng-click='sourcePage = sourcePage + 1'>Next</button>
          </div>
        </div>

        <!-- Show source when selected -->
        <div ng-show='sourceSelected'>
          <div>
            <h4>Selected Source:</h4>
            <img src="{{source.image.icon_url}}">
            <p><a href="{{source.site_detail_url}}" target='_blank'>{{source.name}}</a> - {{source.id}}</p>
            <button class='btn btn-default btn-sm' ng-click="cancelSource()">Cancel Source</button>
          </div>
        </div>
      </div>

      <!-- Target -->
      <div class="col-md-6">
        <h3><span class='label label-primary'>...is like this one...</span></h3>
        <div class='input-group'>
          <input type='text' class='form-control' ng-model='targetSearch'>
          <span class='input-group-btn'><button class='btn btn-default' ng-click='searchList(targetSearch, "target")'>Search</button></span>
        </div>

        <!-- Show target search results -->
        <div ng-hide="targetSelected" id='target-search'>
          <h4>Results:</h4>
          <div id='targetResults'>
            <div ng-repeat="target in targetList | startFrom: targetPage * pageSize | limitTo: 5">
              <img src='{{target.image.icon_url}}' height='80' width='80'><a href ng-click='selectTarget(target)'>{{target.name}} - {{target.id}}</a>
            </div>
          </div>
          <div class='btn-group btn-group-sm' id='target-search-buttons' ng-show='targetPageCount'>
            <button class='btn btn-default' ng-disabled='targetPage == 0' ng-click='targetPage = targetPage - 1'>Previous</button>
            <button type='button' class='btn btn-default'>{{targetPage + 1}}/{{targetPageCount + 1}}</button>
            <button class='btn btn-default btn-sm' ng-disabled='targetPage == targetPageCount' ng-click='targetPage = targetPage + 1'>Next</button>
          </div>
        </div>

        <!-- Show target when selected -->
        <div ng-show='targetSelected'>
          <div>
            <h4>Selected Target:</h4>
            <img src='{{target.image.icon_url}}'>
            <p><a href='{{target.site_detail_url}}' target='_blank'>{{target.name}}</a> - {{target.id}}</p>
            <button class='btn btn-default btn-sm' ng-click="cancelTarget()">Cancel Target</button>
          </div>
        </div>
      </div>
    </div>

    <div class='row'>
      <div class='col-md-8' id='because-search'>
        <h3><span class='label label-primary'>...because...</span></h3>
        <div class='input-group'>
          <input type='text' class='form-control' ng-model='bondDescription'>
          <span class='input-group-btn'><button class='btn btn-default' ng-disabled='!sourceSelected && !targetSelected' ng-click='newBond(source, target, bondDescription)'>Submit</button></span>
        </div>
      </div>
    </div><!-- Close Row -->
    <h4><%= link_to 'Back', root_path %></h4>
    </div>
  </div><!-- Close Controller -->
</div><!-- Close Container -->


